<%= javascript_include_tag 'jquery.tree.js' %>
<%= stylesheet_link_tag '/javascripts/themes/apple/style.css' %>


<script type="text/javascript">

  $j(function () {
    $j("#funerals_tree").tree({
      ui : {
        parent_close: false,
        dots: false

      },
      callback: {
        onselect: function(NODE){
          if ($j(NODE).attr('rel') == "root")
          {
            $j.getScript("/home/funerals?funerals_article=1")
          }
          else
          {
            $j.getScript("/home/show_funerals?parent_id=" + NODE.id)
          }
         
        },
        onload: function(NODE){
          $j.each($j(".open[rel='root']"), function(){
            $j(this).css("background", "transparent");
          });
        }
      },
      data :{
        type: "json",
        opts : {
          url: "/admin/products/tree_funeral",
          async: true
        }
      }

    });
  });
  
  $j(function () {
    $j("#monuments_tree").tree({
      ui : {
        dots: false
      },
      callback: {
        onselect: function(NODE){
          if ($j(NODE).attr('rel') == "root")
          {
            $j.getScript("/home/monuments?monuments_article=1")
          }
          else
          {
            $j.getScript("/home/show_monuments?parent_id=" + NODE.id)
          }
         
        },
        onload: function(NODE){
          $j.each($j(".open[rel='root']"), function(){
            $j(this).css("background", "transparent");
          });
        }
      },
      data :{
        type: "json",
        opts : {
          url: "/admin/products/tree_monument",
          async: true
        }
      }
    });
  });


</script>

<div id="cataloge" style="float:left;width:20%">
  <div id="funerals_tree" class="demo source tree tree-apple" style="direction: ltr;">
  </div>
  <div style="clear:both;"></div>
  <div id="monuments_tree" class="demo source tree tree-apple" style="direction: ltr;">
  </div>
</div>
